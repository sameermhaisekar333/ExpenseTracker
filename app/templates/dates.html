{% extends "/basic.html" %}
{% block css_content %}
<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
{% endblock css_content %}
{% block title_content %}
<title>{{title}}</title>
{% endblock title_content %}

{% block main_content %}
<div class="container">
    <div class="table-responsive-md ">
        <table class="table table-sm  table-dark table-striped table-bordered caption-top ">
            <caption>
                <h2>Transactions <h4> by {{heading}}</h4>
                </h2>
            </caption>
            <th>ID</th>
            <th>ACCOUNT</th>
            <th>CATEGORY</th>
            <th>SUBCATEGORY</th>
            <th>DATE</th>
            <th>AMOUNT</th>
            <th></th>
            <th></th>

            {% for data in posts %}
            <tr>
                <td>{{data.id}}</td>
                <td><a class="text-decoration-none"
                        href="{{url_for('accounts',id = data.account)}}">{{data.account}}</a></td>
                <td><a class="text-decoration-none"
                        href="{{url_for('category',id = data.category)}}">{{data.category}}</a></td>
                <td>{{data.subcategory}}</td>
                <td><a class="text-decoration-none" href="{{url_for('dates',id = data.date)}}">{{data.date}}</a></td>
                <td>{{data.amount}}</td>
                <td> <a class="text-decoration-none" href="{{url_for('updateid',id = data.id)}}">Edit</a></td>
                <td><a class="text-decoration-none" href="{{url_for('delete',id = data.id)}}">Delete</a> </td>
            </tr>

            {%endfor%}
            <tr>
                <td colspan="4"></td>
                <td>Total</td>

                <td> {{ posts | sum(attribute='amount') }}</td>
                <td colspan="2"></td>
            </tr>
        </table>
    </div>
</div>
<div class="container  mt-4 mb-4 ml-4 mr-4">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 mr-2 ml-2 mt-2 mb-2">
            <div id="Date"> </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-6 mr-2 ml-2 mt-2 mb-2">
            <div id="Account"> </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-6 mr-2 ml-2 mt-2 mb-2">
            <div id="Category"> </div>
        </div>
    </div>
</div>
{% endblock main_content %}

{% block js_script %}
<script>

    var graph = {{ graphJSON | safe}};
    Plotly.plot('Date', graph, {});
    var graph1 = {{ graphJSON1 | safe}};
    Plotly.plot('Account', graph1, {});
    var graph2 = {{ graphJSON2 | safe}};
    Plotly.plot('Category', graph2, {});

</script>
{% endblock js_script %}